<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>×’×¨×¤×™× ×©×œ ××—×™×¨×™× - ××•×¨×Ÿ ×•×ª×•××¨</title>
<style>
  :root {
    --bg: #ffffff;
    --ink: #1a1a1a;
    --panel: #f8f9fa;
    --border: #dee2e6;
    --purple: #7c3aed;
    --green: #22c55e;
    --orange: #f59e0b;
    --teal: #14b8a6;
    --cyan: #06b6d4;
    --yellow: #eab308;
    --red: #ef4444;
    --blue: #3b82f6;
  }

  * { box-sizing: border-box; }

  html, body {
    margin: 0;
    padding: 0;
    background: var(--bg);
    color: var(--ink);
    font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
    font-size: 20px;
    min-height: 100vh;
  }

  .container {
    max-width: 950px;
    margin: 0 auto;
    padding: 20px;
  }

  .title {
    text-align: center;
    font-size: 32px;
    color: var(--ink);
    margin-bottom: 10px;
    text-decoration: underline;
  }

  .subtitle {
    text-align: center;
    font-size: 22px;
    color: var(--purple);
    margin-bottom: 25px;
  }

  .exercise {
    background: var(--panel);
    border: 2px solid var(--border);
    border-radius: 16px;
    padding: 25px;
    margin-bottom: 25px;
  }

  .graph-container {
    display: flex;
    justify-content: center;
    margin: 20px 0;
    background: white;
    border-radius: 12px;
    padding: 15px;
    border: 1px solid var(--border);
  }

  .graph-container svg {
    max-width: 100%;
    height: auto;
  }

  .given-box {
    background: rgba(124, 58, 237, 0.1);
    border: 2px solid var(--purple);
    border-radius: 10px;
    padding: 15px 20px;
    margin: 15px 0;
    font-size: 20px;
  }

  .given-box .formula {
    direction: ltr;
    display: inline-block;
    font-family: 'Times New Roman', serif;
    font-size: 22px;
    background: rgba(124, 58, 237, 0.1);
    padding: 3px 10px;
    border-radius: 6px;
    margin: 3px 5px;
  }

  .question-section {
    background: white;
    border: 2px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    margin: 20px 0;
    transition: all 0.3s;
  }

  .question-section.correct {
    border-color: var(--green);
    background: rgba(34, 197, 94, 0.08);
  }

  .question-section.hint-active {
    border-color: var(--orange);
  }

  .question-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 15px;
  }

  .question-letter {
    background: var(--purple);
    color: white;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 20px;
  }

  .question-text {
    font-size: 22px;
    color: var(--ink);
  }

  .sub-question {
    margin: 15px 0 15px 20px;
    padding: 15px;
    background: var(--panel);
    border-radius: 10px;
    border: 1px solid var(--border);
  }

  .sub-question.correct {
    border-color: var(--green);
    background: rgba(34, 197, 94, 0.1);
  }

  .sub-label {
    color: var(--cyan);
    font-weight: bold;
    margin-bottom: 10px;
  }

  .options-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    margin: 15px 0;
  }

  .option-btn {
    padding: 14px 18px;
    font-size: 20px;
    border: 2px solid var(--border);
    border-radius: 10px;
    background: white;
    color: var(--ink);
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
  }

  .option-btn:hover:not(:disabled) {
    border-color: var(--purple);
    background: rgba(124, 58, 237, 0.1);
    transform: scale(1.02);
  }

  .option-btn.correct {
    border-color: var(--green);
    background: rgba(34, 197, 94, 0.2);
    color: #166534;
  }

  .option-btn.wrong {
    border-color: var(--red);
    background: rgba(239, 68, 68, 0.15);
    animation: shake 0.4s;
  }

  .option-btn:disabled {
    cursor: not-allowed;
    opacity: 0.7;
  }

  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-6px); }
    75% { transform: translateX(6px); }
  }

  .input-row {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
    justify-content: center;
    margin: 15px 0;
  }

  .answer-input {
    width: 100px;
    padding: 12px;
    font-size: 24px;
    text-align: center;
    border: 2px solid var(--border);
    border-radius: 8px;
    background: white;
    color: var(--ink);
  }

  .answer-input:focus {
    outline: none;
    border-color: var(--cyan);
  }

  .answer-input.correct {
    border-color: var(--green);
    background: rgba(34, 197, 94, 0.15);
  }

  .answer-input.wrong {
    border-color: var(--red);
    animation: shake 0.3s;
  }

  .unit {
    font-size: 20px;
    color: #666;
  }

  .check-btn {
    padding: 12px 28px;
    font-size: 20px;
    border: none;
    border-radius: 10px;
    background: var(--cyan);
    color: white;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.2s;
  }

  .check-btn:hover:not(:disabled) {
    background: var(--teal);
    transform: translateY(-2px);
  }

  .check-btn:disabled {
    background: #ccc;
    cursor: not-allowed;
  }

  .hint-box {
    margin-top: 15px;
    padding: 14px 18px;
    background: rgba(245, 158, 11, 0.15);
    border: 2px solid var(--orange);
    border-radius: 10px;
    font-size: 18px;
    color: #92400e;
    display: none;
  }

  .hint-box.show {
    display: block;
    animation: fadeIn 0.4s;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .success-msg {
    color: var(--green);
    font-size: 22px;
    font-weight: bold;
    margin-top: 12px;
    display: none;
    text-align: center;
  }

  .success-msg.show {
    display: block;
    animation: pop 0.4s;
  }

  @keyframes pop {
    0% { transform: scale(0.8); opacity: 0; }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); opacity: 1; }
  }

  .attempt-counter {
    text-align: center;
    color: #888;
    font-size: 16px;
    margin-top: 8px;
  }

  .legend {
    display: flex;
    justify-content: center;
    gap: 40px;
    margin: 15px 0;
    font-size: 18px;
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .legend-line {
    width: 40px;
    height: 4px;
    border-radius: 2px;
  }

  .celebration {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 1000;
  }

  .confetti {
    position: absolute;
    width: 12px; height: 12px;
    border-radius: 2px;
    animation: fall 3s ease-out forwards;
  }

  @keyframes fall {
    0% { transform: translateY(-50px) rotate(0deg); opacity: 1; }
    100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
  }

  .progress-bar {
    background: var(--border);
    height: 10px;
    border-radius: 5px;
    margin: 20px 0;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--teal), var(--green));
    border-radius: 5px;
    transition: width 0.4s;
    width: 0%;
  }

  .progress-text {
    text-align: center;
    color: #666;
    font-size: 16px;
    margin-bottom: 10px;
  }

  .final-celebration {
    display: none;
    text-align: center;
    padding: 30px;
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(20, 184, 166, 0.15));
    border: 3px solid var(--green);
    border-radius: 16px;
    margin-top: 25px;
  }

  .final-celebration.show {
    display: block;
    animation: pop 0.5s;
  }

  .final-celebration h2 {
    color: var(--green);
    font-size: 32px;
    margin: 0 0 15px 0;
  }
</style>
</head>
<body>

<div class="container">
  <div class="title">×©××œ×” 5 - ×’×¨×¤×™× ×©×œ ××—×™×¨×™×</div>
  <div class="subtitle">×”×©×•×•××ª ×”×¦×¢×•×ª ××—×™×¨: ××•×¨×Ÿ ××•×œ ×ª×•××¨</div>

  <div class="progress-text">×”×ª×§×“××•×ª: <span id="progressCount">0</span> ××ª×•×š 5 ×©××œ×•×ª</div>
  <div class="progress-bar">
    <div class="progress-fill" id="progressFill"></div>
  </div>

  <div class="exercise">
    <!-- Graph -->
    <div class="graph-container">
      <svg viewBox="0 0 500 400" width="500" height="400">
        <!-- Background grid -->
        <defs>
          <pattern id="grid" width="50" height="40" patternUnits="userSpaceOnUse">
            <path d="M 50 0 L 0 0 0 40" fill="none" stroke="#e5e7eb" stroke-width="1"/>
          </pattern>
        </defs>
        <rect x="50" y="20" width="430" height="320" fill="url(#grid)"/>

        <!-- Axes -->
        <line x1="50" y1="340" x2="480" y2="340" stroke="#1a1a1a" stroke-width="2"/>
        <line x1="50" y1="340" x2="50" y2="20" stroke="#1a1a1a" stroke-width="2"/>

        <!-- X-axis arrow -->
        <polygon points="480,340 470,335 470,345" fill="#1a1a1a"/>
        <!-- Y-axis arrow -->
        <polygon points="50,20 45,30 55,30" fill="#1a1a1a"/>

        <!-- Axis labels -->
        <text x="485" y="345" font-size="16" fill="#1a1a1a">x</text>
        <text x="55" y="18" font-size="16" fill="#1a1a1a">××—×™×¨ (â‚ª)</text>
        <text x="240" y="375" font-size="16" fill="#1a1a1a">×©×˜×— (×"×¨)</text>

        <!-- Y-axis values -->
        <text x="40" y="345" font-size="14" fill="#666" text-anchor="end">0</text>
        <text x="40" y="305" font-size="14" fill="#666" text-anchor="end">200</text>
        <text x="40" y="265" font-size="14" fill="#666" text-anchor="end">400</text>
        <text x="40" y="225" font-size="14" fill="#666" text-anchor="end">600</text>
        <text x="40" y="185" font-size="14" fill="#666" text-anchor="end">800</text>
        <text x="40" y="145" font-size="14" fill="#666" text-anchor="end">1000</text>
        <text x="40" y="105" font-size="14" fill="#666" text-anchor="end">1200</text>
        <text x="40" y="65" font-size="14" fill="#666" text-anchor="end">1400</text>

        <!-- X-axis values -->
        <text x="100" y="358" font-size="14" fill="#666" text-anchor="middle">5</text>
        <text x="150" y="358" font-size="14" fill="#666" text-anchor="middle">10</text>
        <text x="200" y="358" font-size="14" fill="#666" text-anchor="middle">15</text>
        <text x="250" y="358" font-size="14" fill="#666" text-anchor="middle">20</text>
        <text x="300" y="358" font-size="14" fill="#666" text-anchor="middle">25</text>
        <text x="350" y="358" font-size="14" fill="#666" text-anchor="middle">30</text>
        <text x="400" y="358" font-size="14" fill="#666" text-anchor="middle">35</text>
        <text x="450" y="358" font-size="14" fill="#666" text-anchor="middle">40</text>

        <!-- Grid lines for key values -->
        <line x1="50" y1="300" x2="480" y2="300" stroke="#e5e7eb" stroke-width="1"/>
        <line x1="50" y1="260" x2="480" y2="260" stroke="#e5e7eb" stroke-width="1"/>
        <line x1="50" y1="220" x2="480" y2="220" stroke="#e5e7eb" stroke-width="1"/>
        <line x1="50" y1="180" x2="480" y2="180" stroke="#e5e7eb" stroke-width="1"/>
        <line x1="50" y1="140" x2="480" y2="140" stroke="#e5e7eb" stroke-width="1"/>
        <line x1="50" y1="100" x2="480" y2="100" stroke="#e5e7eb" stroke-width="1"/>
        <line x1="50" y1="60" x2="480" y2="60" stroke="#e5e7eb" stroke-width="1"/>

        <!-- Graph I: Tomer - y = 48x (steep, through origin) -->
        <!-- At x=0: y=0, at x=25: y=1200, at x=30: y=1440 -->
        <!-- Scale: x: 10 units = 50px, y: 200 units = 40px -->
        <!-- x=0 â†’ 50, x=25 â†’ 300, x=30 â†’ 350 -->
        <!-- y=0 â†’ 340, y=1200 â†’ 100, y=1440 â†’ 52 -->
        <line x1="50" y1="340" x2="350" y2="52" stroke="#ef4444" stroke-width="3"/>
        <text x="320" y="45" font-size="18" fill="#ef4444" font-weight="bold">I</text>

        <!-- Graph II: Oren - y = 700 + 20x (starts at 700) -->
        <!-- At x=0: y=700, at x=25: y=1200, at x=35: y=1400 -->
        <!-- y=700 â†’ 200, y=1200 â†’ 100, y=1400 â†’ 60 -->
        <line x1="50" y1="200" x2="400" y2="60" stroke="#3b82f6" stroke-width="3"/>
        <text x="410" y="55" font-size="18" fill="#3b82f6" font-weight="bold">II</text>

        <!-- Intersection point at (25, 1200) -->
        <circle cx="300" cy="100" r="7" fill="#22c55e" stroke="white" stroke-width="2"/>

        <!-- Point at x=17 for question c -->
        <!-- x=17 â†’ 50 + 17*10 = 220 -->
        <!-- Tomer at 17: y=48*17=816 â†’ 340 - 816*0.2 = 176.8 -->
        <!-- Oren at 17: y=700+20*17=1040 â†’ 340 - 1040*0.2 = 132 -->
        <line x1="220" y1="340" x2="220" y2="130" stroke="#888" stroke-width="1" stroke-dasharray="5,5"/>
        <text x="220" y="370" font-size="12" fill="#888" text-anchor="middle">17</text>

        <!-- Dashed lines to intersection -->
        <line x1="300" y1="340" x2="300" y2="100" stroke="#22c55e" stroke-width="1" stroke-dasharray="5,5"/>
        <line x1="50" y1="100" x2="300" y2="100" stroke="#22c55e" stroke-width="1" stroke-dasharray="5,5"/>
      </svg>
    </div>

    <div class="legend">
      <div class="legend-item">
        <div class="legend-line" style="background: #ef4444;"></div>
        <span>×’×¨×£ I</span>
      </div>
      <div class="legend-item">
        <div class="legend-line" style="background: #3b82f6;"></div>
        <span>×’×¨×£ II</span>
      </div>
      <div class="legend-item">
        <div style="width: 14px; height: 14px; background: #22c55e; border-radius: 50%;"></div>
        <span>× ×§×•×“×ª ×—×™×ª×•×š</span>
      </div>
    </div>

    <div class="given-box">
      <div style="margin-bottom: 10px;"><strong>× ×ª×•×Ÿ:</strong></div>
      <div style="display: flex; gap: 30px; flex-wrap: wrap; justify-content: center;">
        <div>
          <strong>××•×¨×Ÿ:</strong>
          <span class="formula">Price = 700 + 20x</span>
        </div>
        <div>
          <strong>×ª×•××¨:</strong>
          <span class="formula">Price = 48x</span>
        </div>
      </div>
      <div style="margin-top: 10px; color: #666; font-size: 16px;">
        (x = ×©×˜×— ×‘×"×¨, Price = ××—×™×¨ ×‘-â‚ª)
      </div>
    </div>

    <!-- Question A: Which graph is which -->
    <div class="question-section" id="qa-section">
      <div class="question-header">
        <div class="question-letter">×</div>
        <div class="question-text">××™×–×” ×’×¨×£ ×©×™×™×š ×œ×›×œ ××—×“ ××”×¨×¦×¤×™×?</div>
      </div>

      <div class="sub-question" id="qa1-box">
        <div class="sub-label">×’×¨×£ I ×©×™×™×š ×œ:</div>
        <div class="options-grid" id="qa1-options">
          <button class="option-btn" onclick="checkOption('qa1', 'tomer', this)">×ª×•××¨</button>
          <button class="option-btn" onclick="checkOption('qa1', 'oren', this)">××•×¨×Ÿ</button>
        </div>
        <div class="hint-box" id="hint-qa1"></div>
        <div class="success-msg" id="success-qa1">× ×›×•×Ÿ! ×’×¨×£ I ×¢×•×‘×¨ ×“×¨×š ×”×¨××©×™×ª</div>
      </div>

      <div class="sub-question" id="qa2-box">
        <div class="sub-label">×’×¨×£ II ×©×™×™×š ×œ:</div>
        <div class="options-grid" id="qa2-options">
          <button class="option-btn" onclick="checkOption('qa2', 'tomer', this)">×ª×•××¨</button>
          <button class="option-btn" onclick="checkOption('qa2', 'oren', this)">××•×¨×Ÿ</button>
        </div>
        <div class="hint-box" id="hint-qa2"></div>
        <div class="success-msg" id="success-qa2">× ×›×•×Ÿ! ×’×¨×£ II ××ª×—×™×œ ×‘-700</div>
      </div>
    </div>

    <!-- Question B1: Area where same price -->
    <div class="question-section" id="qb1-section">
      <div class="question-header">
        <div class="question-letter">×‘1</div>
        <div class="question-text">×¢×‘×•×¨ ××™×–×” ×©×˜×— ×”××—×™×¨ ×–×”×” ××¦×œ ×©× ×™×”×?</div>
      </div>
      <div class="input-row">
        <input type="text" class="answer-input" id="qb1" placeholder="?" maxlength="4">
        <span class="unit">×"×¨</span>
        <button class="check-btn" onclick="checkNumeric('qb1', 25)">×‘×“×•×§</button>
      </div>
      <div class="hint-box" id="hint-qb1"></div>
      <div class="success-msg" id="success-qb1">× ×›×•×Ÿ! ×‘×“×™×•×§ ×‘× ×§×•×“×ª ×”×—×™×ª×•×š</div>
      <div class="attempt-counter" id="att-qb1"></div>
    </div>

    <!-- Question B2: Price at that area -->
    <div class="question-section" id="qb2-section">
      <div class="question-header">
        <div class="question-letter">×‘2</div>
        <div class="question-text">××” ×”××—×™×¨ ×¢×‘×•×¨ ××•×ª×• ×©×˜×—?</div>
      </div>
      <div class="input-row">
        <input type="text" class="answer-input" id="qb2" placeholder="?" maxlength="5">
        <span class="unit">â‚ª</span>
        <button class="check-btn" onclick="checkNumeric('qb2', 1200)">×‘×“×•×§</button>
      </div>
      <div class="hint-box" id="hint-qb2"></div>
      <div class="success-msg" id="success-qb2">××¦×•×™×Ÿ! 48Ã—25 = 1200 â‚ª</div>
      <div class="attempt-counter" id="att-qb2"></div>
    </div>

    <!-- Question C1: Who is cheaper for 17mÂ² -->
    <div class="question-section" id="qc1-section">
      <div class="question-header">
        <div class="question-letter">×’1</div>
        <div class="question-text">×¢×‘×•×¨ ×©×˜×— ×©×œ 17 ×"×¨ - ××™ ×–×•×œ ×™×•×ª×¨?</div>
      </div>
      <div class="options-grid" id="qc1-options">
        <button class="option-btn" onclick="checkOption('qc1', 'tomer', this)">×ª×•××¨</button>
        <button class="option-btn" onclick="checkOption('qc1', 'oren', this)">××•×¨×Ÿ</button>
      </div>
      <div class="hint-box" id="hint-qc1"></div>
      <div class="success-msg" id="success-qc1">× ×›×•×Ÿ! ×ª×•××¨: 816â‚ª, ××•×¨×Ÿ: 1040â‚ª</div>
    </div>

    <!-- Question C2: By how much -->
    <div class="question-section" id="qc2-section">
      <div class="question-header">
        <div class="question-letter">×’2</div>
        <div class="question-text">×‘×›××” ×”×•× ×–×•×œ ×™×•×ª×¨?</div>
      </div>
      <div class="input-row">
        <input type="text" class="answer-input" id="qc2" placeholder="?" maxlength="4">
        <span class="unit">â‚ª</span>
        <button class="check-btn" onclick="checkNumeric('qc2', 224)">×‘×“×•×§</button>
      </div>
      <div class="hint-box" id="hint-qc2"></div>
      <div class="success-msg" id="success-qc2">××¢×•×œ×”! 1040 - 816 = 224 â‚ª</div>
      <div class="attempt-counter" id="att-qc2"></div>
    </div>

  </div>

  <div class="final-celebration" id="finalCelebration">
    <h2>×›×œ ×”×›×‘×•×“! ×¡×™×™××ª ××ª ×›×œ ×”×©××œ×•×ª!</h2>
    <div style="font-size: 20px; color: #166534;">
      ×œ××“×ª ×œ×–×”×•×ª ×’×¨×¤×™× ×œ×¤×™ × ×•×¡×—××•×ª ×•×œ×—×©×‘ × ×§×•×“×•×ª ×—×™×ª×•×š!
    </div>
  </div>

</div>

<div class="celebration" id="celebration"></div>

<script>
// Correct answers
const correctAnswers = {
  'qa1': 'tomer',  // Graph I = Tomer (passes through origin)
  'qa2': 'oren',   // Graph II = Oren (y-intercept 700)
  'qb1': 25,       // Same price at 25 mÂ²
  'qb2': 1200,     // Price is 1200 NIS
  'qc1': 'tomer',  // Tomer is cheaper for 17mÂ²
  'qc2': 224       // By 224 NIS
};

// Progressive hints (without revealing answer)
const hints = {
  'qa1': [
    '×¨××–: ×©×™××• ×œ×‘ ××™×¤×” ×›×œ ×’×¨×£ ×—×•×ª×š ××ª ×¦×™×¨ Y (×›×©x=0)',
    '×¨××–: ×ª×•××¨: 48Ã—0 = 0, ××•×¨×Ÿ: 700+20Ã—0 = 700',
    '×¨××–: ×’×¨×£ ×©×¢×•×‘×¨ ×“×¨×š ×”×¨××©×™×ª (0,0) ××ª×—×™×œ ×-0...'
  ],
  'qa2': [
    '×¨××–: ×‘×“×§×• ××ª × ×§×•×“×ª ×”×”×ª×—×œ×” ×©×œ ×›×œ ×’×¨×£ ×¢×œ ×¦×™×¨ Y',
    '×¨××–: ××™×–×• × ×•×¡×—×” × ×•×ª× ×ª 700 ×›×©x=0?',
    '×¨××–: 700 + 20Ã—0 = 700 - ×–×” ×”×’×¨×£ ×©××ª×—×™×œ ×‘-700'
  ],
  'qb1': [
    '×¨××–: ×—×¤×©×• ××ª × ×§×•×“×ª ×”×—×™×ª×•×š ×©×œ ×©× ×™ ×”×’×¨×¤×™×',
    '×¨××–: ×¤×ª×¨×•: 48x = 700 + 20x',
    '×¨××–: 28x = 700, ××– x = ?'
  ],
  'qb2': [
    '×¨××–: ×”×¦×™×‘×• ××ª ×”×©×˜×— ×©××¦××ª× ×‘× ×•×¡×—×” ×©×œ ×ª×•××¨',
    '×¨××–: ×—×©×‘×• 48 Ã— (×”×ª×©×•×‘×” ××‘1)',
    '×¨××–: 48 Ã— 25 = ?'
  ],
  'qc1': [
    '×¨××–: ×—×©×‘×• ××ª ×”××—×™×¨ ××¦×œ ×›×œ ××—×“ ×¢×‘×•×¨ 17 ×"×¨',
    '×¨××–: ×ª×•××¨: 48Ã—17 = ?, ××•×¨×Ÿ: 700+20Ã—17 = ?',
    '×¨××–: ×”×©×•×•: 816 ××•×œ 1040 - ××™ × ×•×ª×Ÿ ×¤×—×•×ª?'
  ],
  'qc2': [
    '×¨××–: ×—×¡×¨×• ××ª ×”××—×™×¨ ×”×–×•×œ ××”××—×™×¨ ×”×™×§×¨',
    '×¨××–: ××•×¨×Ÿ - ×ª×•××¨ = ×”×”×¤×¨×©',
    '×¨××–: 1040 - 816 = ?'
  ]
};

let attempts = {};
let completed = new Set();
const totalQuestions = 5; // qa (counts as 1), qb1, qb2, qc1, qc2

function checkOption(id, value, btn) {
  if (completed.has(id)) return;

  if (!attempts[id]) attempts[id] = 0;
  attempts[id]++;

  const section = document.getElementById(id + '-box') || document.getElementById(id.substring(0,2) + '1-section');
  const hintBox = document.getElementById('hint-' + id);
  const successMsg = document.getElementById('success-' + id);
  const btns = btn.parentElement.querySelectorAll('.option-btn');

  if (value === correctAnswers[id]) {
    // Correct
    btn.classList.add('correct');
    btns.forEach(b => b.disabled = true);
    if (section) section.classList.add('correct');
    hintBox.classList.remove('show');
    successMsg.classList.add('show');

    // Mark as completed
    if (id === 'qa1' || id === 'qa2') {
      if (completed.has('qa1') || id === 'qa2') {
        if (completed.has('qa2') || id === 'qa1') {
          // Both qa1 and qa2 complete - count as 1
        }
      }
      completed.add(id);
      if (completed.has('qa1') && completed.has('qa2') && !completed.has('qa')) {
        completed.add('qa');
        updateProgress();
      }
    } else {
      completed.add(id);
      updateProgress();
    }

    createConfetti();
  } else {
    // Wrong - show hint
    btn.classList.add('wrong');
    setTimeout(() => btn.classList.remove('wrong'), 400);

    const hintIndex = Math.min(attempts[id] - 1, hints[id].length - 1);
    hintBox.innerHTML = 'ğŸ’¡ ' + hints[id][hintIndex];
    hintBox.classList.add('show');
    if (section) section.classList.add('hint-active');
  }
}

function checkNumeric(id, correct) {
  if (completed.has(id)) return;

  const input = document.getElementById(id);
  const section = document.getElementById(id + '-section');
  const hintBox = document.getElementById('hint-' + id);
  const successMsg = document.getElementById('success-' + id);
  const attCounter = document.getElementById('att-' + id);
  const value = parseInt(input.value.trim());

  if (!attempts[id]) attempts[id] = 0;
  attempts[id]++;

  if (value === correct) {
    // Correct
    input.classList.add('correct');
    input.disabled = true;
    section.classList.add('correct');
    section.classList.remove('hint-active');
    hintBox.classList.remove('show');
    successMsg.classList.add('show');
    section.querySelector('.check-btn').disabled = true;
    if (attCounter) attCounter.textContent = '';

    completed.add(id);
    updateProgress();
    createConfetti();
  } else {
    // Wrong - show hint
    input.classList.add('wrong');
    section.classList.add('hint-active');
    setTimeout(() => input.classList.remove('wrong'), 300);

    const hintIndex = Math.min(attempts[id] - 1, hints[id].length - 1);
    hintBox.innerHTML = 'ğŸ’¡ ' + hints[id][hintIndex];
    hintBox.classList.add('show');

    if (attCounter) {
      attCounter.textContent = '× ×™×¡×™×•×Ÿ ' + attempts[id] + ' - × ×¡×” ×©×•×‘!';
    }

    input.value = '';
    input.focus();
  }
}

function updateProgress() {
  // Count: qa (both parts), qb1, qb2, qc1, qc2
  let count = 0;
  if (completed.has('qa')) count++;
  if (completed.has('qb1')) count++;
  if (completed.has('qb2')) count++;
  if (completed.has('qc1')) count++;
  if (completed.has('qc2')) count++;

  document.getElementById('progressCount').textContent = count;
  document.getElementById('progressFill').style.width = (count / totalQuestions * 100) + '%';

  if (count === totalQuestions) {
    setTimeout(() => {
      document.getElementById('finalCelebration').classList.add('show');
      bigConfetti();
    }, 500);
  }
}

function createConfetti() {
  const c = document.getElementById('celebration');
  const colors = ['#fde047', '#4ade80', '#2dd4bf', '#a3e635', '#22d3ee', '#f472b6', '#a78bfa'];
  for (let i = 0; i < 30; i++) {
    const d = document.createElement('div');
    d.className = 'confetti';
    d.style.left = Math.random() * 100 + '%';
    d.style.background = colors[Math.floor(Math.random() * colors.length)];
    d.style.animationDelay = Math.random() * 0.4 + 's';
    c.appendChild(d);
  }
  setTimeout(() => { c.innerHTML = ''; }, 3000);
}

function bigConfetti() {
  const c = document.getElementById('celebration');
  const colors = ['#fde047', '#4ade80', '#2dd4bf', '#a3e635', '#22d3ee', '#f472b6', '#a78bfa', '#ef4444', '#3b82f6'];
  for (let i = 0; i < 80; i++) {
    const d = document.createElement('div');
    d.className = 'confetti';
    d.style.left = Math.random() * 100 + '%';
    d.style.background = colors[Math.floor(Math.random() * colors.length)];
    d.style.animationDelay = Math.random() * 1 + 's';
    d.style.width = (8 + Math.random() * 8) + 'px';
    d.style.height = (8 + Math.random() * 8) + 'px';
    c.appendChild(d);
  }
  setTimeout(() => { c.innerHTML = ''; }, 4000);
}

// Enter key support for inputs
document.querySelectorAll('.answer-input').forEach(input => {
  input.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
      const btn = input.parentElement.querySelector('.check-btn');
      if (btn && !btn.disabled) btn.click();
    }
  });
});
</script>

</body>
</html>
